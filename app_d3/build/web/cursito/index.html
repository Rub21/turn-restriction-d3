<!DOCTYPE html>

<html>
    <head>
        <title>TODO supply a title</title>
        <script src="http://d3js.org/d3.v3.min.js"></script>

    </head>
    <body>

        <script>

            var width = 1200;
            var height = 960;

            var widthScale = d3.scale.linear()
                    .domain([0, 3308])
                    .range([0, width]);



            //para crear lo axis 
            var x_axis = d3.svg.axis()
                    //.ticks(8)
                    .scale(widthScale);


            var yScale = d3.scale.linear();
            var yAxis = d3.svg.axis()
                    .scale(yScale)
                    .orient("left");


            var camvas = d3.select("body")
                    .append("svg")
                    .attr("width", width)
                    .attr("height", height)
                    .append("g")
                    .attr("transform", "translate(150,20)");


            d3.json("datausers.json", function(data) {

                camvas.selectAll("bar")
                        .data(data)
                        .enter()
                        .append("rect")
                        .attr("width", function(d) {
                            return widthScale(d.edits);
                        })
                        .attr("height", 25)

                        .attr("y", function(d, i) {
                            return i * 30;
                        })
                        .attr("fill", "#58ACFA")
                        .attr("transform", "translate(30,0)");

                camvas.selectAll("text")
                        .data(data)
                        .enter()
                        .append("text")
                        .attr("fill", "white")
                        .attr("y", function(d, i) {
                            return i * 30 + 17;
                        })
                        .text(function(d) {
                            console.log(d);
                            return d.edits;
                        })
                        .attr("transform", function(d, i) {
                            return "translate(" + d.edits / 3.5 + ",0)";
                        });



                camvas.selectAll("text2")
                        .data(data)
                        .enter()
                        .append("text")
                        .attr("fill", "black")
                        .attr("y", function(d, i) {

                            return i * 30;
                        })
                        .text(function(d) {

                            return d.user;
                        })
                        .attr("transform", "translate(-130,20)");


                camvas.append("g")
                        .attr("transform", "translate(0,600)")//movemos 0 px a la isquierda y 400 px del top
                        .call(x_axis);//llaammso a axis que hemos declarado antes

                camvas.append("g")
                        .attr("transform", "translate(0,0)")//movemos 0 px a la isquierda y 400 px del top
                        .call(yAxis);//llaammso a axis que hemos declarado antes




            });








        </script>
    </body>
</html>
